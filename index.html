<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>คู่มือการใช้งาน Crontab (Cron Jobs) ฉบับสมบูรณ์</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #f1f5f9; }
        code, pre { font-family: 'JetBrains Mono', monospace; }
        .syntax-box { transition: all 0.3s ease; }
        .syntax-box:hover { transform: translateY(-5px); border-color: #3b82f6; }
    </style>
</head>
<body class="text-slate-800">

    <!-- Hero Section -->
    <header class="bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white py-16 px-4 shadow-2xl">
        <div class="max-w-5xl mx-auto text-center">
            <h1 class="text-5xl font-extrabold mb-4 tracking-tight">Ultimate Crontab Guide</h1>
            <p class="text-blue-200 text-xl font-light">คู่มือการตั้งเวลาทำงานอัตโนมัติบน Linux อย่างมืออาชีพ</p>
            <div class="mt-8 flex justify-center gap-4">
                <span class="bg-blue-500/20 border border-blue-400/30 px-4 py-2 rounded-full text-sm">v2.0 Detailed Edition</span>
                <span class="bg-green-500/20 border border-green-400/30 px-4 py-2 rounded-full text-sm">Bash/PHP/Python Support</span>
            </div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto px-4 py-12 -mt-8">
        
        <!-- Quick Actions -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-12">
            <div class="bg-white p-6 rounded-2xl shadow-xl border-b-4 border-blue-500">
                <h3 class="font-bold text-slate-500 uppercase text-xs mb-2">เข้าสู่โหมดแก้ไข</h3>
                <code class="text-blue-600 font-bold text-lg">crontab -e</code>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-xl border-b-4 border-green-500">
                <h3 class="font-bold text-slate-500 uppercase text-xs mb-2">เรียกดูรายการ</h3>
                <code class="text-green-600 font-bold text-lg">crontab -l</code>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-xl border-b-4 border-yellow-500">
                <h3 class="font-bold text-slate-500 uppercase text-xs mb-2">เช็คสถานะ Service</h3>
                <code class="text-yellow-600 font-bold text-sm">systemctl status cron</code>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-xl border-b-4 border-red-500">
                <h3 class="font-bold text-slate-500 uppercase text-xs mb-2">ลบรายการทั้งหมด</h3>
                <code class="text-red-600 font-bold text-lg">crontab -r</code>
            </div>
        </div>

        <!-- Section 1: Deep Dive Syntax -->
        <section class="bg-white rounded-3xl p-8 shadow-sm border border-slate-200 mb-12">
            <h2 class="text-3xl font-bold mb-8 text-slate-800 border-l-8 border-blue-600 pl-4">1. โครงสร้างเวลาแบบเจาะลึก</h2>
            
            <div class="grid grid-cols-5 gap-2 mb-8 text-center">
                <div class="syntax-box bg-slate-50 p-4 rounded-xl border-2 border-slate-100">
                    <span class="block text-2xl font-bold text-blue-600 mb-1">*</span>
                    <span class="text-xs font-bold">นาที</span>
                    <span class="block text-[10px] text-slate-400">0 - 59</span>
                </div>
                <div class="syntax-box bg-slate-50 p-4 rounded-xl border-2 border-slate-100">
                    <span class="block text-2xl font-bold text-blue-600 mb-1">*</span>
                    <span class="text-xs font-bold">ชั่วโมง</span>
                    <span class="block text-[10px] text-slate-400">0 - 23</span>
                </div>
                <div class="syntax-box bg-slate-50 p-4 rounded-xl border-2 border-slate-100">
                    <span class="block text-2xl font-bold text-blue-600 mb-1">*</span>
                    <span class="text-xs font-bold">วันที่</span>
                    <span class="block text-[10px] text-slate-400">1 - 31</span>
                </div>
                <div class="syntax-box bg-slate-50 p-4 rounded-xl border-2 border-slate-100">
                    <span class="block text-2xl font-bold text-blue-600 mb-1">*</span>
                    <span class="text-xs font-bold">เดือน</span>
                    <span class="block text-[10px] text-slate-400">1 - 12</span>
                </div>
                <div class="syntax-box bg-slate-50 p-4 rounded-xl border-2 border-slate-100">
                    <span class="block text-2xl font-bold text-blue-600 mb-1">*</span>
                    <span class="text-xs font-bold">วันสัปดาห์</span>
                    <span class="block text-[10px] text-slate-400">0 - 6 (0=อาทิตย์)</span>
                </div>
            </div>

            <div class="bg-blue-50 p-6 rounded-2xl border border-blue-100">
                <h4 class="font-bold text-blue-800 mb-4 flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1a1 1 0 112 0v1a1 1 0 11-2 0zM13.333 16.444a1 1 0 11-1.414-1.414l.707-.707a1 1 0 111.414 1.414l-.707.707zM16.94 15.526a1 1 0 11-1.414 1.414l-.707-.707a1 1 0 111.414-1.414l.707.707z"></path></svg>
                    ตัวดำเนินการพิเศษ (Special Operators)
                </h4>
                <div class="space-y-4">
                    <div class="flex items-start">
                        <span class="bg-blue-600 text-white font-mono px-2 py-1 rounded text-xs mr-3">*</span>
                        <p class="text-sm"><strong>Asterisk:</strong> ทุกค่า (เช่น ทุกนาที, ทุกวัน)</p>
                    </div>
                    <div class="flex items-start">
                        <span class="bg-blue-600 text-white font-mono px-2 py-1 rounded text-xs mr-3">,</span>
                        <p class="text-sm"><strong>Comma:</strong> กำหนดหลายค่า (เช่น <code>1,5,10</code> คือนาทีที่ 1, 5 และ 10)</p>
                    </div>
                    <div class="flex items-start">
                        <span class="bg-blue-600 text-white font-mono px-2 py-1 rounded text-xs mr-3">-</span>
                        <p class="text-sm"><strong>Hyphen:</strong> กำหนดเป็นช่วง (เช่น <code>1-5</code> คือตั้งแต่นาทีที่ 1 ถึง 5)</p>
                    </div>
                    <div class="flex items-start">
                        <span class="bg-blue-600 text-white font-mono px-2 py-1 rounded text-xs mr-3">/</span>
                        <p class="text-sm"><strong>Slash:</strong> กำหนดความถี่ (เช่น <code>*/15</code> คือทุกๆ 15 นาที)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Editor Masterclass -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-8 text-slate-800 border-l-8 border-green-600 pl-4">2. การจัดการ Editor (Vim Cheat Sheet)</h2>
            <div class="bg-slate-900 text-white rounded-3xl p-8 overflow-hidden relative">
                <div class="absolute top-0 right-0 p-8 opacity-10">
                    <svg class="w-32 h-32" fill="currentColor" viewBox="0 0 20 20"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"></path><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd"></path></svg>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="text-green-400 font-bold mb-4 uppercase text-sm tracking-widest">โหมดพิมพ์ (Insert Mode)</h4>
                        <ul class="space-y-3 text-sm">
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>เริ่มพิมพ์ข้อความ</span> <kbd class="bg-slate-700 px-2 rounded">i</kbd></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>ลบบรรทัดที่เคอร์เซอร์อยู่</span> <kbd class="bg-slate-700 px-2 rounded">dd</kbd></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>ย้อนกลับ (Undo)</span> <kbd class="bg-slate-700 px-2 rounded">u</kbd></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="text-blue-400 font-bold mb-4 uppercase text-sm tracking-widest">โหมดคำสั่ง (Command Mode)</h4>
                        <ul class="space-y-3 text-sm">
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>ออกจากโหมดพิมพ์</span> <kbd class="bg-slate-700 px-2 rounded">Esc</kbd></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>บันทึกและออก</span> <kbd class="bg-slate-700 px-2 rounded">:wq</kbd></li>
                            <li class="flex justify-between border-b border-slate-700 pb-2"><span>ออกโดยไม่บันทึก</span> <kbd class="bg-slate-700 px-2 rounded">:q!</kbd></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Professional Best Practices -->
        <section class="bg-white rounded-3xl p-8 shadow-sm border border-slate-200 mb-12">
            <h2 class="text-3xl font-bold mb-8 text-slate-800 border-l-8 border-purple-600 pl-4">3. แนวทางปฏิบัติที่ดีที่สุด (Best Practices)</h2>
            <div class="space-y-6">
                <!-- Point 1 -->
                <div class="flex gap-4 p-4 rounded-2xl hover:bg-slate-50 transition">
                    <div class="text-purple-600 mt-1">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                    </div>
                    <div>
                        <h4 class="font-bold">ใช้ Full Path เสมอ</h4>
                        <p class="text-sm text-slate-500">Crontab ไม่รู้จักรันไทม์ปกติของคุณ ต้องระบุตำแหน่งเต็มเสมอ</p>
                        <div class="mt-2 font-mono text-xs bg-slate-100 p-2 rounded">
                            <span class="text-red-500">ผิด:</span> php script.php<br>
                            <span class="text-green-600">ถูก:</span> /usr/bin/php /var/www/html/script.php
                        </div>
                    </div>
                </div>
                <!-- Point 2 -->
                <div class="flex gap-4 p-4 rounded-2xl hover:bg-slate-50 transition">
                    <div class="text-purple-600 mt-1">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V7M8 7H4a2 2 0 00-2 2v10a2 2 0 002 2h3m8-6l3 3m0 0l-3 3m3-3H8"></path></svg>
                    </div>
                    <div>
                        <h4 class="font-bold">การเปลี่ยน Directory (CD)</h4>
                        <p class="text-sm text-slate-500">ถ้าสคริปต์ของคุณมีการเรียกใช้ไฟล์ภายในโฟลเดอร์เดียวกัน ต้อง <code>cd</code> เข้าไปก่อน</p>
                        <div class="mt-2 font-mono text-xs bg-slate-100 p-2 rounded">
                            * * * * * <span class="text-purple-600">cd /var/www/html &&</span> /usr/bin/php script.php
                        </div>
                    </div>
                </div>
                <!-- Point 3 -->
                <div class="flex gap-4 p-4 rounded-2xl hover:bg-slate-50 transition">
                    <div class="text-purple-600 mt-1">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                    </div>
                    <div>
                        <h4 class="font-bold">การตั้งค่าสิทธิ์ (Permissions)</h4>
                        <p class="text-sm text-slate-500 text-red-500 italic">** สำคัญมาก: สคริปต์ต้องมีสิทธิ์ Execute เสมอ **</p>
                        <div class="mt-2 font-mono text-xs bg-slate-100 p-2 rounded">
                            chmod +x /path/to/your/script.sh
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Troubleshooting Table -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-8 text-slate-800 border-l-8 border-red-600 pl-4">4. แก้ไขปัญหาที่พบบ่อย (Troubleshooting)</h2>
            <div class="overflow-x-auto shadow-xl rounded-2xl border border-slate-200">
                <table class="w-full text-left bg-white">
                    <thead class="bg-slate-50 border-b border-slate-200">
                        <tr>
                            <th class="px-6 py-4 text-sm font-bold text-slate-600 uppercase">ปัญหา</th>
                            <th class="px-6 py-4 text-sm font-bold text-slate-600 uppercase">สาเหตุ</th>
                            <th class="px-6 py-4 text-sm font-bold text-slate-600 uppercase">วิธีแก้</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-100">
                        <tr>
                            <td class="px-6 py-4 text-sm font-bold text-red-600">Cron ไม่ทำงานเลย</td>
                            <td class="px-6 py-4 text-sm text-slate-500">Service อาจหยุดทำงาน</td>
                            <td class="px-6 py-4 text-sm"><code class="bg-slate-100 p-1 rounded">sudo service cron start</code></td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-sm font-bold text-red-600">สคริปต์ Error แต่ไม่รู้เหตุผล</td>
                            <td class="px-6 py-4 text-sm text-slate-500">ไม่ได้เก็บ Log</td>
                            <td class="px-6 py-4 text-sm">เพิ่ม <code>>> /path/to/log 2>&1</code> ต่อท้ายคำสั่ง</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-sm font-bold text-red-600">เรียก PHP/Python ไม่ขึ้น</td>
                            <td class="px-6 py-4 text-sm text-slate-500">Path ของโปรแกรมไม่ถูกต้อง</td>
                            <td class="px-6 py-4 text-sm font-mono italic">พิมพ์ <code>which php</code> ใน Terminal เพื่อหา Path จริง</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-sm font-bold text-red-600">เวลาทำงานไม่ตรง</td>
                            <td class="px-6 py-4 text-sm text-slate-500">Timezone ของ Server ผิด</td>
                            <td class="px-6 py-4 text-sm"><code class="bg-slate-100 p-1 rounded">timedatectl</code> เพื่อเช็คโซนเวลา</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Testing Section -->
        <section class="bg-yellow-50 border-2 border-yellow-200 rounded-3xl p-8 text-center">
            <h2 class="text-2xl font-bold mb-4 text-yellow-800 italic">"สคริปต์พังเพราะ Path ผิด คือปัญหาอันดับ 1 ของ Cron Job"</h2>
            <p class="text-yellow-700 text-sm mb-6">หมั่นเช็ค Log ไฟล์ของคุณอย่างสม่ำเสมอด้วยคำสั่งด้านล่างนี้:</p>
            <div class="inline-block bg-slate-900 text-white px-6 py-3 rounded-full font-mono text-sm shadow-lg">
                tail -n 50 -f /var/log/close_round.log
            </div>
        </section>

    </main>

    <footer class="text-center py-12 text-slate-400 text-xs border-t border-slate-200 mt-12">
        <p>จัดทำขึ้นเพื่อเป็นคู่มือมาตรฐานสำหรับการบริหารจัดการ Linux Server</p>
        <p class="mt-2">&copy; 2024 System Administrator Guide</p>
    </footer>

</body>
</html>